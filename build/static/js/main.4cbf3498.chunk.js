(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{1:function(e,t,a){e.exports={contain:"mystyle_contain__2A1z_",boxstyle:"mystyle_boxstyle__N5hDV",boxstyle2:"mystyle_boxstyle2__LLeyz",boxstyle3:"mystyle_boxstyle3__1YipR",boxstyle4:"mystyle_boxstyle4__3bPyY",fullFormStyle:"mystyle_fullFormStyle__2jBGk",formTitle:"mystyle_formTitle__wRqrb",bottomText:"mystyle_bottomText__2H7O0",errorText:"mystyle_errorText__1yoAM",buttonStyle:"mystyle_buttonStyle__3GLRi",smallButtonStyle:"mystyle_smallButtonStyle__3wt11",choiceButtonStyle:"mystyle_choiceButtonStyle__2mJ5d",infoBox:"mystyle_infoBox__38fi0",iconStyle:"mystyle_iconStyle__3Nr_n",titleStyle:"mystyle_titleStyle__3JksC",smallText:"mystyle_smallText__a0Zi5",statBoxes:"mystyle_statBoxes__2RSlQ",topImg:"mystyle_topImg__2R6yF",dropDownStyle:"mystyle_dropDownStyle__zss3t",headerStyle:"mystyle_headerStyle__3_uem",loading:"mystyle_loading__VjnnD",loadingText:"mystyle_loadingText__TYgbb",bigImg:"mystyle_bigImg__E6l4v",smallImg:"mystyle_smallImg__3ODX9",picStyle:"mystyle_picStyle__2EfRA",centerText:"mystyle_centerText__3uUCt"}},171:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(63),r=a.n(i),s=a(5),o=a(6),c=a(2),m=a(8),u=a(7),h=a(4),d=a(9),p=(a(71),a(13)),g=a(23);var E,y={position:"fixed",backgroundColor:"#004d00",top:"0",right:"0",height:"100%",width:"70%",zIndex:"50"},f={textAlign:"right",padding:"5px",marginRight:"10px"},b={display:"block",marginTop:"20px",padding:"20px",width:"100%",color:"#fff",fontSize:"20px",background:"#227D26",borderLeft:"6px solid",borderColor:"#003300"},v={position:"fixed",backgroundColor:"#000",opacity:"0.3",top:"0",left:"0",height:"100%",width:"100%",zIndex:"50"},S={color:"#fff",fontSize:"46px",display:"flex",verticalAlign:"middle",lineHeight:"normal"},w={color:"#fff",fontSize:"46px",verticalAlign:"middle",lineHeight:"normal"},x=function(){var e,t,a=Object(n.useState)(!1),i=Object(g.a)(a,2),r=i[0],s=i[1];return r&&(e=l.a.createElement("div",{style:y},l.a.createElement("h1",{style:f,onClick:function(){return s(!1)}},l.a.createElement("ion-icon",{name:"close-outline",style:w})),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(h.b,{to:"/",style:b,onClick:function(){return s(!1)}},"Main")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/about",style:b,onClick:function(){return s(!1)}},"About")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/settings",style:b,onClick:function(){return s(!1)}},"Settings")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/login",style:b,onClick:function(){s(!1),localStorage.clear()}},"Log Out")))),t=l.a.createElement("div",{style:v,onClick:function(){return s(!1)}})),l.a.createElement("nav",null,l.a.createElement("span",{style:S,onClick:function(){return s(!r)}},l.a.createElement("ion-icon",{name:"menu"})),t,e)},O=a(1),N=a.n(O);var _=(E={width:"100%"},Object(p.a)(E,"width","200px"),Object(p.a)(E,"right","0"),E),j={width:"100%"},k={width:"24px"},C=function(){return null!==localStorage.getItem("token")?l.a.createElement("header",{className:N.a.headerStyle},l.a.createElement("div",{style:k}),l.a.createElement("h1",{style:_},"Alpome"),l.a.createElement(x,{style:k})):l.a.createElement("header",{className:N.a.headerStyle},l.a.createElement("h1",{style:j},"Alpome"))},T=function(e){return fetch("/api/users/"+e).then((function(e){return e.json()}))},I=function(e){return fetch("/api/growing_unit/"+e).then((function(e){return e.json()}))},U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={units:[],loading:!0},n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.getUnits=n.getUnits.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"getUnits",value:function(e){var t=this;T(e).then((function(e){t.setState({units:e.own_units,loading:!1})}))}},{key:"handleSubmit",value:function(e){localStorage.getItem("currentUser");e.preventDefault(),this.state.units.map((function(e){console.log("units: "+e.nickname)}))}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("currentUser");this.getUnits(e)}},{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:N.a.loading},l.a.createElement("div",{className:N.a.loadingText},l.a.createElement("ion-icon",{name:"sync-outline"}),l.a.createElement("p",null,"Loading"))):void 0!==this.state.units[0]?this.state.units.map((function(e){return l.a.createElement(h.b,{to:"/unit/".concat(e.unit_id),key:e.unit_id},l.a.createElement("div",{className:N.a.boxstyle},l.a.createElement("ion-icon",{name:"flower-outline",className:N.a.iconStyle}),l.a.createElement("p",{className:N.a.titleStyle},e.nickname)))})):l.a.createElement("div",{className:N.a.infoBox},l.a.createElement("h1",null,"Welcome ",l.a.createElement("ion-icon",{name:"happy-outline"})),l.a.createElement("p",null,"You don't seem to have any gardening units yet! Create one by pressing the button below."))}}]),a}(l.a.Component),D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){null===localStorage.getItem("token")&&this.props.history.push("/login")}},{key:"render",value:function(){return l.a.createElement("div",null)}}]),a}(l.a.Component),A=Object(d.f)(D);var R=function(e){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,null),l.a.createElement(U,null),l.a.createElement(h.b,{to:"/addnew"},l.a.createElement("div",{className:N.a.boxstyle2},l.a.createElement("img",{src:"",alt:"img",className:N.a.iconStyle}),l.a.createElement("p",null,"Add new unit +"))))};var L=function(){return l.a.createElement("div",{className:N.a.infoBox},l.a.createElement("h1",null,"About us"),l.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."))};var M=function(){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,null),l.a.createElement(L,null))},P=a(3),W=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).doLogin=function(){(function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("/api/login/",a).then((function(e){return e.json()}))})(n.state.user.username,n.state.user.password).then((function(e){if(void 0!==e.user){var t=n.props.setUser(e.user);return localStorage.setItem("token",e.token),localStorage.setItem("currentUser",e.user.user_id),n.props.history.push("/"),t}n.setState({errorMessage:"Username or password is incorrect."})})).catch((function(e){console.log(e)}))},n.state={user:{username:"",password:""},errorMessage:"",validUser:!0},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.doLogin=n.doLogin.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return{user:Object(P.a)(Object(P.a)({},e.user),{},Object(p.a)({},n,a))}}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.doLogin()}},{key:"render",value:function(){return l.a.createElement("div",{className:N.a.fullFormStyle},l.a.createElement("h1",{className:N.a.formTitle},"Login"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Username"),l.a.createElement("input",{type:"text",name:"username",id:"username",label:"Username",value:this.state.user.username,onChange:this.handleChange}),l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"password",id:"password",label:"Password",value:this.state.user.password,onChange:this.handleChange}),l.a.createElement("div",null,l.a.createElement("p",{className:N.a.errorText},this.state.errorMessage)),l.a.createElement("div",{className:N.a.bottomText},l.a.createElement("p",null,"Don't have an account?"),l.a.createElement(h.b,{to:"/signup"},"Sign up here!"),l.a.createElement("p",null,"\n")),l.a.createElement("button",{type:"submit",className:N.a.buttonStyle},"Login")))}}]),a}(l.a.Component),q=Object(d.f)(W),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement(q,{setUser:this.props.setUser}))}}]),a}(l.a.Component),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){if(e.preventDefault(),n.state.user.password===n.state.user.checkPw){var t=Object(P.a)({},n.state.user);delete t.checkPw,function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/users/",t).then((function(e){return e.json()}))}(t).then((function(e){void 0!==e.error?n.setState({errorMessage:"Cannot signup. Username, password or email needs to be changed."}):n.props.history.push("/login")}))}else n.setState({errorMessage:"Passwords do not match."})},n.state={user:{username:"",email:"",password:"",checkPw:""},errorMessage:""},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return{user:Object(P.a)(Object(P.a)({},e.user),{},Object(p.a)({},n,a))}}))}},{key:"render",value:function(){return l.a.createElement("div",{className:N.a.fullFormStyle},l.a.createElement("h1",{className:N.a.formTitle},"Sign Up"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Username"),l.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),l.a.createElement("label",null,"Email Address"),l.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.handleChange}),l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",name:"checkPw",value:this.state.checkPw,onChange:this.handleChange}),l.a.createElement("div",null,l.a.createElement("p",{className:N.a.errorText},this.state.errorMessage)),l.a.createElement("div",{className:N.a.bottomText},l.a.createElement("p",null,"Already have an account?"),l.a.createElement(h.b,{to:"/login"},"Login here!")),l.a.createElement("button",{type:"submit",className:N.a.buttonStyle},"Sign Up")))}}]),a}(l.a.Component),J=Object(d.f)(H);var z=function(){return l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement(J,null))},F="https://us-central1-amiable-hydra-279814.cloudfunctions.net/app/api/read",V=function(){return fetch(F).then((function(e){return e.json()}))},Y=function(e){return fetch(F+"/datetime/"+e).then((function(e){return e.json()}))};var G={fontSize:"50px",marginRight:"20px",marginTop:"10px"},K=function(e){return e.current>=e.low&&e.current<=e.high?l.a.createElement("div",{style:G},l.a.createElement("ion-icon",{name:"happy-outline",className:N.a.iconStyle})," "):e.current>=e.min&&e.current<=e.max?l.a.createElement("div",{style:G},l.a.createElement("ion-icon",{name:"sad-outline",className:N.a.iconStyle})):l.a.createElement("div",{style:G},l.a.createElement("ion-icon",{name:"skull-outline",className:N.a.iconStyle}))};var Q={fontSize:"50px",marginRight:"20px",marginTop:"10px"},X=function(e){var t=e.today-e.last_watered;return t<=e.w_freq?l.a.createElement("div",{style:Q},l.a.createElement("ion-icon",{name:"happy-outline",className:N.a.iconStyle})," "):t>e.w_freq?l.a.createElement("div",{style:Q},l.a.createElement("ion-icon",{name:"sad-outline",className:N.a.iconStyle})):l.a.createElement("div",{style:Q},l.a.createElement("ion-icon",{name:"skull-outline",className:N.a.iconStyle}))},Z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).fr=new FileReader,n.setTheLw=function(){return n.setState((function(e){return{unit:Object(P.a)(Object(P.a)({},e.unit),{},{last_watered:n.getNow()})}})),console.log("setTheLw: "+JSON.stringify(n.state.unit)),console.log("getttnowww: "+n.getNow()),n.state.unit},n.handleTimeUpdate=function(e){e.preventDefault(),n.setTheLw();var t={common_names:n.state.unit.common_names,shared_access:n.state.unit.shared_access,nickname:n.state.unit.nickname,location:n.state.unit.location,supragarden:n.state.unit.supragarden,last_watered:n.getNow(),watering_frequency:n.state.unit.watering_frequency,data_source:n.state.unit.data_source,owner:n.state.unit.owner,images:n.state.unit.images,unit_id:n.state.unit.unit_id,notes:n.state.unit.notes},a=n.getUnitId();console.log("unitId: "+a),function(e,t,a){console.log("GROWINGUNITAPI data here: "+JSON.stringify(e));var n={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:t}};return fetch("/api/growing_unit/"+a,n).then((function(e){return e.json()}))}(t,"bearer "+localStorage.getItem("token"),a).then((function(e){console.log("msg from UnitContent: "+JSON.stringify(e)),console.log(" this is the state "+JSON.stringify(n.state.unit)),void 0!==e.error?console.log("(UnitContent.js) Error message: "+e.error):console.log("It worked.")}))},n.handleImgSubmit=function(e){e.persist(),console.log("tried to add img"+e.target.files[0]),n.fr.readAsDataURL(e.target.files[0]);var t=e.target.files[0];console.log("event target "+t),n.setState((function(t){return Object(P.a)(Object(P.a)({},t),{},{image:e.target.files[0]})})),console.log("here we are "+JSON.stringify(n.state.image))},n.handleImgSend=function(e){e.preventDefault(),console.log("here we are "+n.state.image);var t=n.getUnitId(),a=new FormData;a.append("image",n.state.image),function(e,t,a){return console.log("imagedata: "+e),fetch("/api/growing_unit/unitimage/"+a,{method:"POST",body:e,headers:{Authorization:t},processData:!1,mimeType:"multipart/form-data",contentType:!1}).then((function(e){return console.log("heres the response: "+e),e})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(a,"bearer "+localStorage.getItem("token"),t).then((function(e){console.log("UnitContent img upload msg: "+e),void 0!==e?console.log("(UnitContent.js) Error message: "+e):console.log("Image uploaded. "+e)}))},n.showImages=function(e){if(void 0!==e.images[0])return n.state.unit.images.map((function(e){return l.a.createElement("div",{key:e.key},l.a.createElement("img",{src:e.image_url,alt:"img",className:N.a.smallImg}))}))},n.topImg=function(e){return void 0!==e[0]?l.a.createElement("div",null,l.a.createElement("img",{src:e[e.length-1].image_url,alt:"No image",className:N.a.bigImg}),l.a.createElement("form",{onSubmit:n.handleImgSend},l.a.createElement("input",{type:"file",name:"plant_img",onChange:n.handleImgSubmit}),l.a.createElement("button",{className:N.a.smallButtonStyle},"Add image"))):l.a.createElement("div",{className:N.a.bigImg},l.a.createElement("p",{className:N.a.centerText}),l.a.createElement("form",{onSubmit:n.handleImgSend},l.a.createElement("input",{type:"file",name:"plantimg",onChange:n.handleImgSubmit}),l.a.createElement("p",null,"\n"),l.a.createElement("button",{className:N.a.smallButtonStyle},"Add image")))},n.handleEdit=function(e){e.preventDefault(),n.setState({editingNotes:!n.state.editingNotes})},n.state={unit:"",data:[],last_w:null,editingNotes:!1,image:"",loading:!0,shortLoading:!0,minmax:{temp:{min:"10",low:"16",high:"24",max:"30"},tempW:{min:"10",low:"16",high:"24",max:"30"},ph:{min:"3.5",low:"5",high:"6.5",max:"8"},h:{min:"50",low:"70",high:"90",max:"110"},ec:{min:"1",low:"1.5",high:"3.5",max:"4"}}},n.handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleTimeUpdate=n.handleTimeUpdate.bind(Object(c.a)(n)),n.topImg=n.topImg.bind(Object(c.a)(n)),n.handleImgSubmit=n.handleImgSubmit.bind(Object(c.a)(n)),n.handleEdit=n.handleEdit.bind(Object(c.a)(n)),n.showImages=n.showImages.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"getUnit",value:function(e){var t=this;I(e).then((function(e){t.setState({unit:e,last_w:e.last_watered,shortLoading:!1})}))}},{key:"getNow",value:function(){return(new Date).getTime()}},{key:"lastWatered",value:function(){var e=this.getNow()-this.state.unit.last_watered;return Math.round(e/864e5)}},{key:"getToday",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getSupragarden",value:function(){var e=this;Y(this.getToday()).then((function(t){e.setState({data:t[0].data,loading:!1})}))}},{key:"getUnitId",value:function(){var e=window.location.href.split("/");return e[e.length-1]}},{key:"editNotes",value:function(){return!0===this.state.editingNotes?l.a.createElement("div",null,l.a.createElement("p",{className:N.a.smallText},"editing"),l.a.createElement("button",{onClick:this.handleEdit,className:N.a.smallButtonStyle},"Save")):l.a.createElement("div",null,l.a.createElement("p",{className:N.a.smallText},"not editing ",this.state.unit.notes),l.a.createElement("button",{onClick:this.handleEdit,className:N.a.smallButtonStyle},"Edit"))}},{key:"handleClick",value:function(e){e.preventDefault(),console.log("window.location.href "+window.location.href),console.log("HERE ARE THE CURRENT PROPS "+JSON.stringify(this.props)),console.log("AND HERE IS THE ID "+JSON.stringify(this.props.match.params.unitid)),console.log("image url: "+JSON.stringify(this.state.unit.images)),console.log("garden info: "+JSON.stringify(this.state.data)),console.log("UNIT STATE: "+JSON.stringify(this.state.unit)),console.log("LASTAWATEREEEED: "+this.state.last_w),console.log("right now: "+this.getNow())}},{key:"componentDidMount",value:function(){var e=this.getUnitId();this.getUnit(e),this.getSupragarden()}},{key:"render",value:function(){return!0===this.state.unit.supragarden?this.state.loading?l.a.createElement("div",{className:N.a.loading},l.a.createElement("div",{className:N.a.loadingText},l.a.createElement("ion-icon",{name:"sync-outline"}),l.a.createElement("p",null,"Loading"))):l.a.createElement("div",{className:N.a.contain},l.a.createElement("div",{className:N.a.bigImg},this.topImg(this.state.unit.images)),l.a.createElement("h1",null,this.state.unit.nickname),l.a.createElement(h.b,{to:{pathname:"/unit/temperature/".concat(this.state.unit.unit_id),propperinos:{type:"temp",minmax:this.state.minmax.temp}},unitid:this.state.unit.unit_id,type:"temp"},l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(K,{current:this.state.data.temp,min:this.state.minmax.temp.min,low:this.state.minmax.temp.low,high:this.state.minmax.temp.high,max:this.state.minmax.temp.max}),l.a.createElement("div",null,l.a.createElement("p",null,"Temperature"),l.a.createElement("p",{className:N.a.smallText},this.state.data.temp," \xb0C")))),l.a.createElement(h.b,{to:{pathname:"/unit/temperature/".concat(this.state.unit.unit_id),propperinos:{type:"tempW",minmax:this.state.minmax.tempW}}},l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(K,{current:this.state.data.tempW,min:this.state.minmax.tempW.min,low:this.state.minmax.tempW.low,high:this.state.minmax.tempW.high,max:this.state.minmax.tempW.max}),l.a.createElement("div",null,l.a.createElement("p",null,"Water Temperature"),l.a.createElement("p",{className:N.a.smallText},this.state.data.tempW," \xb0C")))),l.a.createElement(h.b,{to:{pathname:"/unit/temperature/".concat(this.state.unit.unit_id),propperinos:{type:"ph",minmax:this.state.minmax.ph}}},l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(K,{current:this.state.data.ph,min:this.state.minmax.ph.min,low:this.state.minmax.ph.low,high:this.state.minmax.ph.high,max:this.state.minmax.ph.max}),l.a.createElement("div",null,l.a.createElement("p",null,"pH"),l.a.createElement("p",{className:N.a.smallText},this.state.data.ph," ")))),l.a.createElement(h.b,{to:{pathname:"/unit/temperature/".concat(this.state.unit.unit_id),propperinos:{type:"h",minmax:this.state.minmax.h}}},l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(K,{current:this.state.data.h,min:this.state.minmax.h.min,low:this.state.minmax.h.low,high:this.state.minmax.h.high,max:this.state.minmax.h.max}),l.a.createElement("div",null,l.a.createElement("p",null,"Humidity"),l.a.createElement("p",{className:N.a.smallText},this.state.data.h," %")))),l.a.createElement(h.b,{to:{pathname:"/unit/temperature/".concat(this.state.unit.unit_id),propperinos:{type:"ec",minmax:this.state.minmax.ec}}},l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(K,{current:this.state.data.ec,min:this.state.minmax.ec.min,low:this.state.minmax.ec.low,high:this.state.minmax.ec.high,max:this.state.minmax.ec.max}),l.a.createElement("div",null,l.a.createElement("p",null,"Electronic Conductivity"),l.a.createElement("p",{className:N.a.smallText},this.state.data.ec," mS/cm"))))):this.state.shortLoading?l.a.createElement("div",{className:N.a.loading},l.a.createElement("div",{className:N.a.loadingText},l.a.createElement("ion-icon",{name:"sync-outline"}),l.a.createElement("p",null,"Loading"))):l.a.createElement("div",{className:N.a.contain},l.a.createElement("div",null,this.topImg(this.state.unit.images)),l.a.createElement("h1",null,this.state.unit.nickname),l.a.createElement("div",{className:N.a.boxstyle3},l.a.createElement(X,{w_freq:this.state.unit.watering_frequency,today:this.getNow(),last_watered:this.state.unit.last_watered}),l.a.createElement("div",null,l.a.createElement("p",{className:N.a.smallText},"Your garden was last watered ",this.lastWatered()," days ago. "),l.a.createElement("button",{onClick:this.handleTimeUpdate,className:N.a.smallButtonStyle},"Plants watered!"))),l.a.createElement("div",{className:N.a.boxstyle3},this.editNotes()),l.a.createElement("div",{className:N.a.picStyle},this.showImages(this.state.unit)))}}]),a}(l.a.Component);var $=function(e){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,null),l.a.createElement(Z,e))},ee=a(44),te=a(65),ae={TEMPERATURE:["Temperature","temp","\u2103"],TVOC:["TVOC","tvoc","ppm"],ELECTRICAL_CONDUCTIVITY:["Electrical Conductivity","ec",""],CO2:["CO2","co2","ppm"],PH:["pH","ph",""],HUMIDITY:["Humidity","h","%"],WATER_TEMPERATURE:["Water Temperature","tempW","\u2103"],LIGHT:["Light","light","on/off"]};var ne=function(e){var t=e.graphReadings,a=e.parameter,i=Object(n.useState)(a[0]),r=Object(g.a)(i,2),s=r[0],o=(r[1],Object(n.useState)(a[1])),c=Object(g.a)(o,2),m=c[0],u=(c[1],t.slice(0,50)),h=u.map((function(e){return e.data.time.split(" ")[1].slice(0,5)})),d=u.map((function(e){return e.data["".concat(m)]})),p={labels:h,datasets:[{label:"".concat(s),data:Object(ee.a)(d),pointHoverBackgroundColor:"rgba(170,25,127,1)"}]};return l.a.createElement("div",null,l.a.createElement(te.Line,{data:p}))},le=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setGraphView=function(){var e=n.state.type;return"temp"===e?"TEMPERATURE":"tempW"===e?"WATER_TEMPERATURE":"ph"===e?"PH":"h"===e?"HUMIDITY":"ec"===e?"ELECTRICAL_CONDUCTIVITY":void 0},n.state={unit:"",data:[],loading:!0,type:"",title:"",xyz:"",goal:"",minmax:{min:"",low:"",high:"",max:""},readings:[]},n.getUnit=n.getUnit.bind(Object(c.a)(n)),n.getType=n.getType.bind(Object(c.a)(n)),n.handleClick=n.handleClick.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"getUnit",value:function(e){var t=this;console.log("props.unitid: "+e),I(e).then((function(e){t.setState({unit:e})}))}},{key:"getToday",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getSupragarden",value:function(){var e=this;Y(this.getToday()).then((function(t){e.setState({data:t[0].data,loading:!1})}))}},{key:"getUnitId",value:function(){var e=window.location.href.split("/");return e[e.length-1]}},{key:"getType",value:function(){void 0!==this.props.location.propperinos?this.setState({type:this.props.location.propperinos.type}):this.props.history.push("/")}},{key:"setDetails",value:function(){var e="",t="";void 0!==this.props.location.propperinos&&(e=this.props.location.propperinos.type,t=this.props.location.propperinos.minmax),"temp"===e?this.setState({title:"Temperature",xyz:"\xb0C",goal:"20",minmax:t}):"tempW"===e?this.setState({title:"Water Temperature",xyz:"\xb0C",goal:"20",minmax:t}):"ph"===e?this.setState({title:"pH",xyz:"",goal:"5,75",minmax:t}):"h"===e?this.setState({title:"Humidity",xyz:"%",goal:"80",minmax:t}):"ec"===e&&this.setState({title:"Electronic Conductivity",xyz:"mS/cm",goal:"2,5",minmax:t})}},{key:"handleClick",value:function(e){e.preventDefault(),console.log("t\xe4\xe4l\xe4 propsit: "+JSON.stringify(this.props.location.propperinos.type)),console.log("ja t\xe4\xe4l\xe4 statet: "+this.state.type),console.log("title and thing "+this.state.title+this.state.xyz),console.log("here is the type in caps: "+this.setGraphView())}},{key:"componentDidMount",value:function(){var e=this,t=this.getUnitId();this.getUnit(t),this.getSupragarden(),this.getType(),this.setDetails(),V().then((function(t){return e.setState({readings:t})}))}},{key:"render",value:function(){return this.state.loading?l.a.createElement("div",{className:N.a.loading},l.a.createElement("div",{className:N.a.loadingText},l.a.createElement("ion-icon",{name:"sync-outline"}),l.a.createElement("p",null,"Loading"))):l.a.createElement("div",{className:N.a.contain},l.a.createElement("h1",null,this.state.unit.nickname),l.a.createElement("div",{className:N.a.boxstyle},l.a.createElement(K,{current:this.state.data[this.state.type],min:this.state.minmax.min,low:this.state.minmax.low,high:this.state.minmax.high,max:this.state.minmax.max}),this.state.title),l.a.createElement("div",{className:N.a.statBoxes},l.a.createElement("div",{className:N.a.boxstyle4},l.a.createElement("p",null,"Current"),l.a.createElement("p",{className:N.a.smallText},this.state.data[this.state.type]," ",this.state.xyz)),l.a.createElement("div",{className:N.a.boxstyle4},l.a.createElement("p",null,"Goal"),l.a.createElement("p",{className:N.a.smallText},this.state.goal," ",this.state.xyz))),l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"chart"},l.a.createElement(ne,{graphReadings:this.state.readings,parameter:ae[this.setGraphView()]}))))}}]),a}(l.a.Component),ie=Object(d.f)(le);var re=function(e){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,null),l.a.createElement(ie,Object.assign({},e,{unitId:e.unit_id})))},se=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.value,l=t.name;n.setState((function(e){return{unit:Object(P.a)(Object(P.a)({},e.unit),{},Object(p.a)({},l,a))}}))},n.toggleForm=function(e){n.setState((function(t){return{unit:Object(P.a)(Object(P.a)({},t.unit),{},{supragarden:!e}),formToggler:!e}}))},n.wateringFreqCalc=function(){var e=0;return"hours"===n.state.wfDdVal?(e=60*n.state.wfDdNum*60*1e3,n.setState((function(t){return{unit:Object(P.a)(Object(P.a)({},t.unit),{},{watering_frequency:e})}})),n.state.unit):"days"===n.state.wfDdVal?(e=24*n.state.wfDdNum*60*60*1e3,n.setState((function(t){return{unit:Object(P.a)(Object(P.a)({},t.unit),{},{watering_frequency:e})}})),n.state.unit):"weeks"===n.state.wfDdVal?(e=7*n.state.wfDdNum*24*60*60*1e3,n.setState((function(t){return{unit:Object(P.a)(Object(P.a)({},t.unit),{},{watering_frequency:e})}})),n.state.unit):"months"===n.state.wfDdVal?(e=30*n.state.wfDdNum*24*60*60*1e3,n.setState((function(t){return{unit:Object(P.a)(Object(P.a)({},t.unit),{},{watering_frequency:e})}})),n.state.unit):(n.setState((function(e){return{unit:Object(P.a)(Object(P.a)({},e.unit),{},{watering_frequency:null})}})),n.state.unit)},n.onNumSelect=function(e){e.preventDefault(),n.setState({wfDdNum:e.target.value},n.wateringFreqCalc)},n.onValSelect=function(e){e.preventDefault(),n.setState({wfDdVal:e.target.value},n.wateringFreqCalc)},n.handleClick=function(e){e.preventDefault(),n.toggleForm(n.state.formToggler)},n.handleSubmit=function(e){e.preventDefault();var t=Object(P.a)({},n.state.unit);console.log("here it is: "+n.state.unit.watering_frequency),function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json",token:t},body:JSON.stringify(e)};return fetch("/api/growing_unit/",a).then((function(e){return e.json()}))}(t,localStorage.getItem("token")).then((function(e){console.log("msg from AddUnit: "+JSON.stringify(e)),console.log(" here is the state "+JSON.stringify(n.state.unit)),void 0!==e.error?n.setState({errorMessage:"Cannot add unit."}):n.props.history.push("/")}))},n.state={unit:{nickname:"",common_names:[],location:"",supragarden:!1,last_watered:null,watering_frequency:null,data_source:null,owner:localStorage.getItem("currentUser"),shared_access:[],stream_url:"",images:[]},wfDdNum:1,wfDdVal:"days",formToggler:!1,errorMessage:""},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleTest=n.handleTest.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleTest",value:function(e){e.preventDefault(),this.wateringFreqCalc(),console.log("heres the numbers (from addunit): "+JSON.stringify(this.state.unit))}},{key:"render",value:function(){return!0===this.state.formToggler?l.a.createElement("div",{className:N.a.fullFormStyle},l.a.createElement("h1",null,"Add New Unit"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Nickname"),l.a.createElement("input",{type:"text",value:this.state.nickname,onChange:this.handleChange,name:"nickname"}),l.a.createElement("label",null,"Location"),l.a.createElement("input",{type:"text",value:this.state.location,onChange:this.handleChange,name:"location"}),l.a.createElement("label",null,l.a.createElement("button",{onClick:this.handleClick,className:N.a.choiceButtonStyle},l.a.createElement("ion-icon",{name:"radio-button-on-outline"})),"Is it a hydroponic system?"),l.a.createElement("p",{className:N.a.errorText},this.state.errorMessage),l.a.createElement("p",null,"\n"),l.a.createElement("button",{type:"submit",className:N.a.buttonStyle},"Add Unit"))):l.a.createElement("div",{className:N.a.fullFormStyle},l.a.createElement("h1",null,"Add New Unit"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Nickname"),l.a.createElement("input",{type:"text",value:this.state.nickname,onChange:this.handleChange,name:"nickname"}),l.a.createElement("label",null,"Location"),l.a.createElement("input",{type:"text",value:this.state.location,onChange:this.handleChange,name:"location"}),l.a.createElement("label",null,l.a.createElement("button",{onClick:this.handleClick,className:N.a.choiceButtonStyle},l.a.createElement("ion-icon",{name:"radio-button-off-outline"})),"Is it a hydroponic system?"),l.a.createElement("label",null,"Watering Frequency"),l.a.createElement("select",{value:this.state.wfDdNum,onChange:this.onNumSelect,className:N.a.dropDownStyle},l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"4"},"4"),l.a.createElement("option",{value:"5"},"5"),l.a.createElement("option",{value:"6"},"6"),l.a.createElement("option",{value:"7"},"7"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"9"},"9"),l.a.createElement("option",{value:"10"},"10"),l.a.createElement("option",{value:"11"},"11"),l.a.createElement("option",{value:"12"},"12")),l.a.createElement("select",{value:this.state.wfDdVal,onChange:this.onValSelect,className:N.a.dropDownStyle},l.a.createElement("option",{value:"hours"},"Hours"),l.a.createElement("option",{value:"days"},"Days"),l.a.createElement("option",{value:"weeks"},"Weeks"),l.a.createElement("option",{value:"months"},"Months")),l.a.createElement("p",{className:N.a.errorText},this.state.errorMessage),l.a.createElement("p",null,"\n"),l.a.createElement("button",{type:"submit",className:N.a.buttonStyle},"Add Unit")))}}]),a}(l.a.Component),oe=Object(d.f)(se);var ce=function(){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,{previous:""}),l.a.createElement(oe,null))};var me=function(){return l.a.createElement("div",null,l.a.createElement(A,null),l.a.createElement(C,null),l.a.createElement("p",null,"Here are the settings"))},ue=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={id:"",username:""},n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n.showName=n.showName.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"doThing",value:function(e){var t=this;T(e).then((function(e){t.setState({username:e.username},(function(){console.log("username: ",t.state.username)}))}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.doThing(this.state.id)}},{key:"showName",value:function(e){console.log("username2: "+this.state.username)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement("div",null,l.a.createElement("p",null,"\n"),l.a.createElement("p",null,"\n"),l.a.createElement("p",null,"\n"),l.a.createElement("h1",null,"IS THIS WORKING"),l.a.createElement("form",{onClick:this.handleSubmit},l.a.createElement("button",{type:"submit"},"get name to state")),l.a.createElement("button",{type:"submit",onClick:this.showName},"console log name"),l.a.createElement("embed",{src:"https://us-central1-amiable-hydra-279814.cloudfunctions.net/app/api/read",style:he})))}}]),a}(l.a.Component),he={width:"500px",height:"300px"},de=ue,pe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={readings:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;V().then((function(t){return e.setState({readings:t})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"chart"},l.a.createElement(ne,{graphReadings:this.state.readings,parameter:ae.TEMPERATURE})))}}]),a}(n.Component),ge=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setUser=function(e){n.setState({user:e}),console.log("setuser state",n.state.user)},n.state={user:null,units:[]},n.handleClick=n.handleClick.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleClick",value:function(e){e.preventDefault(),console.log(this.state),console.log("users id: "+this.state.user.user_id)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"container"},l.a.createElement(h.a,{basename:"/alpome"},l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return l.a.createElement(R,Object.assign({},t,{user:e.state.user,units:e.state.units}))}}),l.a.createElement(d.a,{path:"/about",render:function(e){return l.a.createElement(M,e)}}),l.a.createElement(d.a,{path:"/login",render:function(t){return l.a.createElement(B,Object.assign({},t,{state:e.state,setUser:e.setUser}))}}),l.a.createElement(d.a,{path:"/signup",render:function(e){return l.a.createElement(z,e)}}),l.a.createElement(d.a,{exact:!0,path:"/unit/:unitid",render:function(t){return l.a.createElement($,Object.assign({},t,{user:e.state.user}))}}),l.a.createElement(d.a,{path:"/unit/temperature/:id",render:function(t){return l.a.createElement(re,Object.assign({},t,{units:e.state.units}))}}),l.a.createElement(d.a,{path:"/addnew",render:function(e){return l.a.createElement(ce,e)}}),l.a.createElement(d.a,{path:"/graph",render:function(e){return l.a.createElement(pe,e)}}),l.a.createElement(d.a,{path:"/settings",render:function(e){return l.a.createElement(me,e)}}),l.a.createElement(d.a,{path:"/test8437586490743385891029748",render:function(e){return l.a.createElement(de,e)}})))))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a(171)},71:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.4cbf3498.chunk.js.map